(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{332:function(t,e,n){"use strict";function r(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=[],n=!0,r=!1,o=void 0;try{for(var l,c=t[Symbol.iterator]();!(n=(l=c.next()).done)&&(e.push(l.value),!i||e.length!==i);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return e}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(e,"a",function(){return r})},634:function(t,e,n){"use strict";n.r(e);n(338),n(34);var r=n(332),o={props:["loading","url","pages"],data:function(){return{paramsModel:{}}},methods:{getPage:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.loading=!0;var n=n;null!=e&&(n=e),this.$axios.$get(n,{params:this.paramsModel}).then(function(e){t.receipts=e.data,t.pages.previousPage=e.links.prev,t.pages.nextPage=e.links.next,t.pages.first=e.links.first,t.pages.last=e.links.last,t.loading=!1},function(e){t.errors=e.response.data.error,t.loading=!1})}}},l=n(30),c=n(47),d=n.n(c),v=n(130),m=n(123),h=n(133),f=n(340),_=n(120),x=n(546),component=Object(l.a)(o,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-flex",{attrs:{xs12:"",sm6:"",md4:"","mt-5":"","mx-auto":"","text-xs-center":""}},[n("v-item-group",{staticClass:"v-btn-group"},[n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-btn",t._g({staticClass:"secondary ",attrs:{flat:""},on:{click:function(e){return t.getPage(t.pages.last)}}},r),[n("v-icon",{attrs:{right:""}},[t._v("fast_rewind")])],1)]}}])},[t._v(" "),n("span",[t._v("Firstpage")])]),t._v(" "),n("v-btn",{staticClass:"secondary",attrs:{flat:"",disabled:null==t.pages.previousPage},on:{click:function(e){return t.getPage(t.pages.previousPage)}}},[n("v-icon",{attrs:{right:""}},[t._v("mdi-arrow-left-bold")]),t._v(" Previous Page\n    ")],1),t._v(" "),n("v-btn",{staticClass:"secondary",attrs:{flat:"",disabled:null==t.pages.nextPage},on:{click:function(e){return t.getPage(t.pages.nextPage)}}},[t._v("Next Page "),n("v-icon",{attrs:{right:""}},[t._v("mdi-arrow-right-bold")])],1),t._v(" "),n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-btn",t._g({staticClass:"secondary ",attrs:{flat:""},on:{click:function(e){return t.getPage(t.pages.last)}}},r),[n("v-icon",{attrs:{right:""}},[t._v("fast_forward")])],1)]}}])},[t._v(" "),n("span",[t._v("Lastpage")])])],1),t._v(" "),n("v-progress-circular",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],attrs:{indeterminate:"",color:"blue"}})],1)},[],!1,null,null,null),y=component.exports;d()(component,{VBtn:v.a,VFlex:m.a,VIcon:h.a,VItemGroup:f.b,VProgressCircular:_.a,VTooltip:x.a});var w={layout:"user",components:{Pagination:y},data:function(){return{fetching:!1,searching:!1,loading:!1,date:(new Date).toISOString().substr(0,10),date2:(new Date).toISOString().substr(0,10),startDate:"",endDate:"",dateMenu:!1,dateMenu2:!1,paramsModel:{},searchModel:{params:{anssid:null,start_date:null,end_date:null,revenue_name:null,revenue_system:null}},pages:{first:"",last:"",previousPage:"",nextPage:""},headers:[{text:"ANSSID",value:"anssid",sortable:!1},{text:"Payer Name",value:"name",sortable:!1},{text:"Amount (₦)",value:"amount",sortable:!1},{text:"Revenue Name",value:"revenueName",sortable:!1},{text:"Revenue Sector",value:"revenueSector",sortable:!1},{text:"Payment Date",value:"paymentDate",sortable:!1}],collections:[],collections_total:0,revenueNames:[],revenueSystems:[],vselect:{revenue_name:"",revenue_system:""}}},computed:{computedstartDate:function(){return this.formatDate(this.date)}},created:function(){this.getCollections()},mounted:function(){this.$store.dispatch("auth/checkPermission",["VIEW_COLLECTION"]),this.getRevenues(),this.getSystems()},watch:{date:function(t){this.startDate=this.formatDate(this.date)},date2:function(t){this.endDate=this.formatDate(this.date2)}},methods:{formatDate:function(t){if(!t)return null;var e=t.split("-"),n=Object(r.a)(e,3),o=n[0],l=n[1],c=n[2];return"".concat(l,"/").concat(c,"/").concat(o)},searchCollections:function(){var t=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var e in this.searching=!0,this.searchModel.params)this.searchModel.params.hasOwnProperty(e)&&null!=this.searchModel.params[e]&&(this.paramsModel[e]=this.searchModel.params[e]);this.paramsModel.revenue_name=this.searchModel.params.revenue_name,this.paramsModel.revenue_system=this.searchModel.params.revenue_system,this.$axios.$get("Collections/search",{params:this.paramsModel}).then(function(e){t.collections=e.data,t.searching=!1,t.pages.previousPage=e.links.prev,t.pages.nextPage=e.links.next,t.pages.first=e.links.first,t.pages.last=e.links.last},function(e){t.errors=e.response.data.error,t.searching=!1}),this.$axios.$get("Collections/search/total",{params:this.paramsModel}).then(function(e){t.collections_total=e.total_formatted},function(t){})},getCollections:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.loading=!0;var n="Collections",r="Collections/total";null!=e&&(n=e,r="Collections/search/total"),this.$axios.$get(n,{params:this.paramsModel}).then(function(e){t.collections=e.data,t.loading=!1,t.pages.previousPage=e.links.prev,t.pages.nextPage=e.links.next,t.pages.first=e.links.first,t.pages.last=e.links.last},function(e){t.errors=e.response.data.error,t.loading=!1}),this.$axios.$get(r,{params:this.paramsModel}).then(function(e){t.collections_total=e.total_formatted,t.loading=!1},function(t){})},getRevenues:function(){var t=this;this.fetching=!0,this.$axios.$get("revenue-types").then(function(e){t.revenueNames=e.data,t.fetching=!1},function(e){t.fetching=!1})},getSystems:function(){var t=this;this.fetching=!0,this.$axios.$get("revenue-systems").then(function(e){t.revenueSystems=e.data,t.fetching=!1},function(e){t.fetching=!1})},parseDate:function(t){if(!t)return null;var e=t.split("/"),n=Object(r.a)(e,3),o=n[0],l=n[1],c=n[2];return"".concat(c,"-").concat(o.padStart(2,"0"),"-").concat(l.padStart(2,"0"))}}},M=n(117),k=n(635),C=n(633),S=n(124),P=n(317),D=n(631),N=n(132),$=n(666),V=Object(l.a)(w,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"dashboard-wrapper",attrs:{"grid-list-lg":""}},[n("div",{staticClass:"headline mb-5 font-weight-medium"},[t._v("TOTAL COLLECTIONS")]),t._v(" "),n("v-sheet",{staticClass:"grey lighten-2 pa-3 text-xs-center font-weight-bold caption mb-4"},[t._v("Narrow down search results by using the options below. You must alter at least one of the fields, then click the search button")]),t._v(" "),n("v-sheet",{staticClass:"px-4 pt-4 pb-5 my-shadow-2",staticStyle:{opacity:"0.9"}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[n("div",{staticClass:"caption font-weight-bold mb-1"},[t._v("Start Date")]),t._v(" "),n("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-text-field",t._g({attrs:{label:"Choose Date","append-icon":"event",readonly:"",outline:""},model:{value:t.searchModel.params.start_date,callback:function(e){t.$set(t.searchModel.params,"start_date",e)},expression:"searchModel.params.start_date"}},r))]}}]),model:{value:t.dateMenu,callback:function(e){t.dateMenu=e},expression:"dateMenu"}},[t._v(" "),n("v-date-picker",{attrs:{"no-title":""},on:{input:function(e){t.dateMenu=!1}},model:{value:t.searchModel.params.start_date,callback:function(e){t.$set(t.searchModel.params,"start_date",e)},expression:"searchModel.params.start_date"}})],1)],1),t._v(" "),n("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[n("div",{staticClass:"caption font-weight-bold mb-1"},[t._v("End Date")]),t._v(" "),n("v-menu",{ref:"dateMenu2",attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-text-field",t._g({attrs:{outline:"",label:"Choose Date","append-icon":"event"},on:{blur:function(e){t.date=t.parseDate(t.searchModel.params.end_date)}},model:{value:t.searchModel.params.end_date,callback:function(e){t.$set(t.searchModel.params,"end_date",e)},expression:"searchModel.params.end_date"}},r))]}}])},[t._v(" "),n("v-date-picker",{attrs:{color:"secondary","no-title":""},on:{input:function(e){t.dateMenu2=!1}},model:{value:t.searchModel.params.end_date,callback:function(e){t.$set(t.searchModel.params,"end_date",e)},expression:"searchModel.params.end_date"}})],1)],1),t._v(" "),n("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[n("div",{staticClass:"caption font-weight-bold mb-1"},[t._v("ANSSID")]),t._v(" "),n("v-text-field",{attrs:{outline:""},model:{value:t.searchModel.params.anssid,callback:function(e){t.$set(t.searchModel.params,"anssid",e)},expression:"searchModel.params.anssid"}},[n("div",{attrs:{slot:"label"},slot:"label"},[t._v("Search by ANSSID")])])],1),t._v(" "),n("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[n("div",{staticClass:"caption font-weight-bold mb-1"},[t._v("Revenue Name")]),t._v(" "),n("v-progress-circular",{directives:[{name:"show",rawName:"v-show",value:t.fetching,expression:"fetching"}],staticStyle:{position:"absolute",top:"left: 30px",margin:"10px 0 0 100px"},attrs:{width:1,size:11,color:"#757575",indeterminate:""}}),t._v(" "),n("v-select",{attrs:{"item-text":"name","item-value":"code",items:t.revenueNames,outline:""},model:{value:t.searchModel.params.revenue_name,callback:function(e){t.$set(t.searchModel.params,"revenue_name",e)},expression:"searchModel.params.revenue_name"}},[n("div",{attrs:{slot:"label"},slot:"label"},[t._v("Choose")])])],1),t._v(" "),n("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[n("div",{staticClass:"caption font-weight-bold mb-1"},[t._v("Revenue Sector")]),t._v(" "),n("v-progress-circular",{directives:[{name:"show",rawName:"v-show",value:t.fetching,expression:"fetching"}],staticStyle:{position:"absolute",top:"left: 30px",margin:"10px 0 0 100px"},attrs:{width:1,size:11,color:"#757575",indeterminate:""}}),t._v(" "),n("v-select",{attrs:{"item-text":"name","item-value":"code",items:t.revenueSystems,outline:""},model:{value:t.searchModel.params.revenue_system,callback:function(e){t.$set(t.searchModel.params,"revenue_system",e)},expression:"searchModel.params.revenue_system"}},[n("div",{attrs:{slot:"label"},slot:"label"},[t._v("Choose")])])],1),t._v(" "),n("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[n("v-btn",{staticClass:"secondary caption mt-4",attrs:{small:"",flat:"",block:"",round:"",loading:t.searching,disabled:t.searching},on:{click:t.searchCollections}},[t._v("Search")])],1)],1),t._v(" "),n("section",{staticClass:"mt-5"},[n("h4",{staticStyle:{"margin-bottom":"5px"}},[t._v("Total Collection : ₦ "+t._s(t.collections_total))]),t._v(" "),n("v-data-table",{attrs:{"hide-actions":"",headers:t.headers,items:t.collections},scopedSlots:t._u([{key:"items",fn:function(e){return[n("td",[t._v(t._s(e.item.ANSSID))]),t._v(" "),n("td",[t._v(t._s(e.item.PayerName))]),t._v(" "),n("td",[t._v(t._s(t._f("formatNumber")(e.item.Amount)))]),t._v(" "),n("td",[t._v(t._s(e.item.RevenueName))]),t._v(" "),n("td",[t._v(t._s(e.item.RevenueSystem))]),t._v(" "),n("td",[t._v(t._s(e.item.PaymentDate))])]}}])}),t._v(" "),n("v-flex",{attrs:{xs12:"",sm7:"",md7:"","mt-5":"","mx-auto":"","text-xs-center":""}},[n("v-item-group",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"v-btn-group"},[n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-btn",t._g({staticClass:"secondary ",attrs:{flat:""},on:{click:function(e){return t.getCollections(t.pages.first)}}},r),[n("v-icon",{attrs:{right:""}},[t._v("fast_rewind")])],1)]}}])},[t._v(" "),n("span",[t._v("Firstpage")])]),t._v(" "),n("v-btn",{staticClass:"secondary",attrs:{flat:"",disabled:null==t.pages.previousPage},on:{click:function(e){return t.getCollections(t.pages.previousPage)}}},[n("v-icon",{attrs:{right:""}},[t._v("mdi-arrow-left-bold")]),t._v(" Previous Page\n          ")],1),t._v(" "),n("v-btn",{staticClass:"secondary",attrs:{flat:"",disabled:null==t.pages.nextPage},on:{click:function(e){return t.getCollections(t.pages.nextPage)}}},[t._v("Next Page "),n("v-icon",{attrs:{right:""}},[t._v("mdi-arrow-right-bold")])],1),t._v(" "),n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-btn",t._g({staticClass:"secondary ",attrs:{flat:""},on:{click:function(e){return t.getCollections(t.pages.last)}}},r),[n("v-icon",{attrs:{right:""}},[t._v("fast_forward")])],1)]}}])},[t._v(" "),n("span",[t._v("Lastpage")])])],1),t._v(" "),n("v-progress-circular",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],attrs:{indeterminate:"",color:"blue"}})],1)],1)],1)],1)},[],!1,null,"38c4456c",null);e.default=V.exports;d()(V,{VBtn:v.a,VContainer:M.a,VDataTable:k.a,VDatePicker:C.a,VFlex:m.a,VIcon:h.a,VItemGroup:f.b,VLayout:S.a,VMenu:P.a,VProgressCircular:_.a,VSelect:D.a,VSheet:N.a,VTextField:$.a,VTooltip:x.a})}}]);